{"version":3,"file":"app.js","sourceRoot":"","sources":["../src/app.ts"],"names":[],"mappings":";;AAAA,mCAAmC;AAEnC,0CAA0C;AAC1C,oEAA4D;AAC5D,qCAAqC;AAErC,MAAM,GAAG;IAEL,YAAY,UAAwB;QAChC,IAAI,CAAC,GAAG,GAAG,OAAO,EAAE,CAAA;QAEpB,IAAI,CAAC,SAAS,EAAE,CAAC;QACjB,IAAI,CAAC,oBAAoB,EAAE,CAAC;QAC5B,IAAI,CAAC,qBAAqB,CAAC,UAAU,CAAC,CAAC;QACvC,IAAI,CAAC,sBAAsB,EAAE,CAAC;IAClC,CAAC;IAEM,MAAM;QACT,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,EAAE,GAAG,EAAE;YACnC,OAAO,CAAC,GAAG,CAAC,6BAA6B,OAAO,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC;QACjE,CAAC,CAAC,CAAC;IACP,CAAC;IAEM,SAAS;QACZ,MAAM,EACF,UAAU,EACV,QAAQ,EACR,UAAU,GACb,GAAG,OAAO,CAAC,GAAG,CAAC;QAChB,0CAA0C;QAC1C,OAAO,CAAC,GAAG,CAAC,aAAa,UAAU,IAAI,UAAU,IAAI,QAAQ,EAAE,CAAC,CAAA;QAChE,QAAQ,CAAC,OAAO,CAAC,aAAa,UAAU,IAAI,UAAU,IAAI,QAAQ,EAAE,CAAC,CAAC;IAC1E,CAAC;IAEM,oBAAoB;QACvB,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC,CAAA;IACnC,CAAC;IAEM,qBAAqB,CAAC,WAAyB;QAClD,WAAW,CAAC,OAAO,CAAC,CAAC,UAAU,EAAE,EAAE;YAC/B,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,EAAE,UAAU,CAAC,MAAM,CAAC,CAAC;QACzC,CAAC,CAAC,CAAC;IACP,CAAC;IAEM,sBAAsB;QACzB,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,0BAAe,CAAC,CAAA;IACjC,CAAC;CACJ;AAED,kBAAe,GAAG,CAAC","sourcesContent":["import * as express from 'express';\nimport Controller from './interfaces/controller.interface';\nimport * as bodyParser from 'body-parser';\nimport errorMiddleware from './middleware/error-middleware';\nimport * as mongoose from 'mongoose';\n\nclass App {\n    public app: express.Application;\n    constructor(controller: Controller[]) {\n        this.app = express()\n\n        this.connectDB();\n        this.initializeMiddleware();\n        this.initializeControllers(controller);\n        this.initializeErrorHandler();\n    }\n\n    public listen() {\n        this.app.listen(process.env.PORT, () => {\n            console.log(`App listening on the port ${process.env.PORT}`);\n        });\n    }\n\n    public connectDB() {\n        const {\n            MONGO_PORT,\n            MONGO_DB,\n            MONGO_HOST,\n        } = process.env;\n        //   mongodb://localhost:27017/oauthServer\n        console.log(`mongodb://${MONGO_HOST}:${MONGO_PORT}/${MONGO_DB}`)\n        mongoose.connect(`mongodb://${MONGO_HOST}:${MONGO_PORT}/${MONGO_DB}`);\n    }\n\n    public initializeMiddleware() {\n        this.app.use(bodyParser.json())\n    }\n\n    public initializeControllers(controllers: Controller[]) {\n        controllers.forEach((controller) => {\n            this.app.use('/', controller.router);\n        });\n    }\n\n    public initializeErrorHandler() {\n        this.app.use(errorMiddleware)\n    }\n}\n\nexport default App;"]}